<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ç§‘æ—é–€å¸‚æ¯æ—¥å›å ±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">

  <style>
    :root{
      --primary:#f4a300;
      --border:#e0e0e0;
      --bg:#f6f6f8;
    }

    /* é˜²æ­¢æ¬„ä½è¢«æ’ç ´ */
    *,*::before,*::after{ box-sizing:border-box; }

    body{
      font-family:-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
      margin:0;padding:14px 14px 90px;background:var(--bg);
      display:flex;justify-content:center;color:#111;
    }

    .container{max-width:520px;width:100%;}

    .section{
      background:#fff;border-radius:14px;border:1px solid var(--border);
      padding:14px;margin-bottom:12px;
    }
    .section h2{margin:0 0 8px;font-size:16px;font-weight:700;}

    input,select{
      width:100%;padding:10px;border-radius:10px;font-size:16px;
      border:1px solid var(--border);margin-top:6px;margin-bottom:12px;
      background:#fff;
    }

    /* ğŸ”§ ç‰¹åˆ¥æŒ‡å®š date æ¬„ä½ä¹Ÿç”¨ border-boxï¼Œé¿å… iOS æ’å‡ºé‚Šç·š */
    input[type="date"]{
      box-sizing:border-box;
      max-width:100%;
    }

    textarea{
      width:100%;height:200px;padding:12px;font-size:15px;
      border-radius:10px;border:1px solid var(--border);resize:vertical;
    }

    .actions{
      position:fixed;left:0;right:0;bottom:0;padding:10px;
      background:#ffffffee;display:flex;gap:10px;backdrop-filter:blur(6px);
      border-top:1px solid var(--border);
    }
    button{
      flex:1;padding:14px 0;border-radius:30px;border:none;font-size:17px;font-weight:700;
    }
    .btn-primary{background:var(--primary);color:#fff;}
    .btn-second{background:#fff;border:2px solid var(--primary);color:#333;}
  </style>
</head>

<body>
  <div class="container">

    <h1 style="text-align:center;margin:6px 0 2px;">ç§‘æ—é–€å¸‚æ¯æ—¥å›å ±</h1>
    <p style="text-align:center;font-size:13px;color:#777;margin-bottom:12px;">è¼¸å…¥æ•¸å­— â†’ ç”¢ç”Ÿè¨Šæ¯ â†’ è²¼ä¼æ¥­å¾®ä¿¡ç¾¤çµ„</p>

    <!-- åŸºæœ¬è³‡è¨Š -->
    <div class="section">
      <h2>åŸºæœ¬è³‡è¨Š</h2>

      <label>æ—¥æœŸï¼š
        <input type="date" id="date">
      </label>

      <label>åº—åï¼š
        <input type="text" id="store" placeholder="ä¾‹ï¼šç«™å‰">
      </label>

      <label>å§“åï¼š
        <select id="name">
          <option value="">è«‹é¸æ“‡åŒä»</option>
          <option>éƒ­å­Ÿé‘«</option><option>é™³è©©æ½”</option><option>æ¸¸ç‘Ÿç„„</option>
          <option>é­é æ©</option><option>æå­Ÿé¦¨</option><option>åŠ‰ç‘‹å©·</option>
          <option>æ—ç‘€å©•</option><option>å‘¨æ›‰ç„</option><option>è•­ç´”è¿</option>
          <option>é™³å®›å¦¤</option><option>ç‹é–é›…</option><option>æ—å¯“è‘³</option>
          <option>å³æ¬£ç®</option><option>å‘‚æ¡‚æ¢…</option>
        </select>
      </label>
    </div>

    <!-- 1 ä»Šæ—¥å¤–æ’¥ -->
    <div class="section">
      <h2>1. ä»Šæ—¥å¤–æ’¥</h2>

      <label>æ½›å®¢å¤–æ’¥é€šæ•¸ï¼š
        <input type="number" id="todayCallPotential" inputmode="numeric" oninput="recalcTotals()">
      </label>

      <label>éä¿èˆŠå®¢å¤–æ’¥é€šæ•¸ï¼š
        <input type="number" id="todayCallOld3Y" inputmode="numeric" oninput="recalcTotals()">
      </label>

      <label>ä»Šæ—¥å¤–æ’¥ç¸½é€šæ•¸ï¼š
        <input type="number" id="todayCallTotal" readonly style="background:#f2f2f2;">
      </label>
    </div>

    <!-- 2 ä»Šæ—¥é ç´„ -->
    <div class="section">
      <h2>2. ä»Šæ—¥é ç´„</h2>
      <label>ä»Šæ—¥é ç´„ç¸½æ•¸ï¼š
        <input type="number" id="todayBookingTotal" inputmode="numeric">
      </label>
    </div>

    <!-- 3 ä»Šæ—¥åˆ°åº— -->
    <div class="section">
      <h2>3. ä»Šæ—¥åˆ°åº—</h2>

      <label>ä»Šæ—¥åˆ°åº—ç¸½æ•¸ï¼š
        <input type="number" id="todayVisitTotal" inputmode="numeric">
      </label>

      <label>è©¦ç”¨ HAï¼š
        <input type="number" id="trialHA" inputmode="numeric">
      </label>

      <label>è©¦ç”¨ APAPï¼š
        <input type="number" id="trialAPAP" inputmode="numeric">
      </label>

      <label>æˆäº¤ HAï¼š
        <input type="number" id="dealHA" inputmode="numeric">
      </label>

      <label>æˆäº¤ APAPï¼š
        <input type="number" id="dealAPAP" inputmode="numeric">
      </label>
    </div>

    <!-- 4 æ˜æ—¥é ç´„ -->
    <div class="section">
      <h2>4. æ˜æ—¥å·²æ’é ç´„</h2>
      <label>æ˜æ—¥é ç´„ç¸½æ•¸ï¼š
        <input type="number" id="tomorrowBookingTotal" inputmode="numeric">
      </label>
    </div>

    <!-- 5 KPI -->
    <div class="section">
      <h2>5. æ˜æ—¥ KPI</h2>

      <label>å¤–æ’¥ç›®æ¨™é€šæ•¸ï¼š
        <input type="number" id="tomorrowKpiCallTotal" inputmode="numeric">
      </label>

      <label>èˆŠå®¢é ç´„ç›®æ¨™(ä½)ï¼š
        <input type="number" id="tomorrowKpiCallOld3Y" inputmode="numeric">
      </label>

      <label>å®Œæˆè©¦æˆ´ç›®æ¨™(å€‹)ï¼š
        <input type="number" id="tomorrowKpiTrial" inputmode="numeric">
      </label>
    </div>

    <div class="section">
      <textarea id="output" placeholder="ç”¢ç”Ÿå¾Œçµæœæœƒé¡¯ç¤ºæ–¼æ­¤"></textarea>
    </div>

  </div>

  <!-- å›ºå®šæŒ‰éˆ• -->
  <div class="actions">
    <button class="btn-primary" onclick="generateMessage()">ç”¢ç”Ÿè¨Šæ¯</button>
    <button class="btn-second" onclick="copyMessage()">è¤‡è£½æ–‡å­—</button>
  </div>

  <script>
    // é€²å…¥é é¢è‡ªå‹•å¡«å…¥ä»Šå¤©æ—¥æœŸ
    document.addEventListener("DOMContentLoaded", function () {
      const dateInput = document.getElementById("date");
      if (!dateInput) return;
      if (dateInput.value) return;

      const today   = new Date();
      const yyyy    = today.getFullYear();
      const mm      = String(today.getMonth() + 1).padStart(2, "0");
      const dd      = String(today.getDate()).padStart(2, "0");
      const value   = `${yyyy}-${mm}-${dd}`;

      dateInput.value = value;
      dateInput.setAttribute("value", value);
    });

    // åªè‡ªå‹•è¨ˆç®—ï¼šä»Šæ—¥å¤–æ’¥ = æ½›å®¢ + éä¿èˆŠå®¢
    function recalcTotals(){
      const total = get("todayCallPotential") + get("todayCallOld3Y");
      document.getElementById("todayCallTotal").value = total>0 ? total : "";
    }
    function get(id){
      return parseInt(document.getElementById(id).value) || 0;
    }

    // ç”¢ç”Ÿè¨Šæ¯
    function generateMessage(){
      const rawDate = document.getElementById("date").value || "";
      const date = rawDate ? rawDate.replace(/-/g,"/") : "____/__/__";
      const store = document.getElementById("store").value || "é–€å¸‚";
      const name  = document.getElementById("name").value || "å§“å";

      const text =
`${date}ï½œ${store} ${name}
1. ä»Šæ—¥å¤–æ’¥ï¼š${get("todayCallTotal")} é€šï¼ˆæ½›åœ¨ ${get("todayCallPotential")} é€šã€éä¿èˆŠå®¢ ${get("todayCallOld3Y")} é€šï¼‰
2. ä»Šæ—¥é ç´„ï¼š${get("todayBookingTotal")} ä½
3. ä»Šæ—¥åˆ°åº—ï¼š${get("todayVisitTotal")} ä½
   è©¦ç”¨ï¼šHA ${get("trialHA")} ä½ã€APAP ${get("trialAPAP")} ä½
   æˆäº¤ï¼šHA ${get("dealHA")} ä½ã€APAP ${get("dealAPAP")} ä½
4. æ˜æ—¥å·²æ’é ç´„ï¼š${get("tomorrowBookingTotal")} ä½
5. æ˜æ—¥KPI:
   å¤–æ’¥ ${get("tomorrowKpiCallTotal")} é€š
   èˆŠå®¢é ç´„ ${get("tomorrowKpiCallOld3Y")} ä½
   å®Œæˆ ${get("tomorrowKpiTrial")} å€‹è©¦æˆ´`;

      document.getElementById("output").value = text;
    }

    // è¤‡è£½æ–‡å­—
    function copyMessage(){
      const o = document.getElementById("output");
      o.select();
      o.setSelectionRange(0,99999);
      document.execCommand("copy");
      alert("å·²è¤‡è£½ï¼Œå‰å¾€ä¼æ¥­å¾®ä¿¡è²¼ä¸Šå³å¯ï¼");
    }
  </script>
</body>
</html>