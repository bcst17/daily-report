<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>台北一區每日回報</title>

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="台北一區每日回報">

<style>
:root{
  --primary:#f4a300;
  --border:#e0e0e0;
  --bg:#f6f6f8;
  --btn-generate:#2B7344;
  --btn-copy:#B51A17;
}

*,*::before,*::after{ box-sizing:border-box; }

body{
  font-family:-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  margin:0;
  padding:14px 14px 90px;
  background:#dfeaf3;
  display:flex;
  justify-content:center;
  color:#111;
  overflow-x:hidden;
}

.container{
  width:100%;
  max-width:520px;
  margin:auto;
}

h1{ text-align:center; margin:6px 0 2px; font-size:22px; font-weight:700; }
.subtitle{ text-align:center; font-size:13px; color:#777; margin-bottom:8px; }

/* 分頁 */
.tab-header{
  display:flex;
  gap:8px;
  margin-bottom:10px;
}
.tab-header button{
  flex:1;
  padding:8px 0;
  border-radius:20px;
  border:1px solid var(--border);
  background:#fff;
  font-size:14px;
}
.tab-header button.active{
  background:var(--primary);
  color:#fff;
  border-color:var(--primary);
}

/* 卡片 */
.section{
  background:#faf7ef;
  border-radius:14px;
  border:1px solid var(--border);
  padding:14px;
  margin-bottom:12px;
  position:relative;
}

.section::after{
  content:"";
  position:absolute;
  top:-25px;
  left:-10px;
  width:42px;
  height:42px;
  background:url("../santa-hat.png") no-repeat center/contain;
  transform:rotate(-30deg);
  pointer-events:none;
}

.section h2{ margin:0 0 8px; font-size:16px; }

label{ display:block;font-size:14px;margin-top:4px; }

input,select,textarea{
  width:100%;
  padding:10px;
  font-size:16px;
  margin-top:4px;
  margin-bottom:10px;
  border-radius:10px;
  border:1px solid var(--border);
}

input[readonly]{ background:#f3f3f3; }

.actions{
  position:fixed;left:0;right:0;bottom:0;
  padding:10px 14px;background:#ffffffee;
  display:flex;gap:10px;border-top:1px solid var(--border);
  z-index:50;
}

button{
  flex:1;
  padding:12px 0;
  border-radius:26px;
  border:none;
  font-size:16px;
  font-weight:600;
}

.btn-primary{ background:var(--btn-generate); color:#fff; }
.btn-secondary{ background:var(--btn-copy); color:#fff; }

/* 顯示切換 */
.hidden{ display:none; }

/* Morning Huddle */
.huddle-row{
  display:flex;
  justify-content:space-between;
  margin-top:8px;
  font-size:15px;
}
.huddle-separator{
  height:1px;
  background:#ddd;
  margin:12px 0;
}

/* 昨日執行檢視 */
.check-row{
  display:flex;
  justify-content:space-between;
  margin-top:10px;
  font-size:14px;
}
.check-value{
  text-align:right;
  font-weight:600;
}
.badge{
  margin-left:6px;
  padding:2px 8px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
}
.badge.green{ background:#e7f7ed; color:#137333; }
.badge.yellow{ background:#fff4d6; color:#8a5a00; }
.badge.red{ background:#fde8e8; color:#b91c1c; }
</style>
</head>

<body>
<div class="container">

<h1>台北一區上班小幫手</h1>
<p class="subtitle">輸入數字 → 產生訊息 → 貼到企業微信群組</p>

<header class="tab-header">
  <button id="tab-huddle">今日目標</button>
  <button id="tab-report" class="active">每日回報</button>
</header>

<!-- Morning Huddle -->
<section id="huddle-view" class="section hidden">
  <h2>今日目標</h2>

  <div class="huddle-row">
    <span>今日預約數</span>
    <span><span id="huddleTodayBooking">-</span> 位</span>
  </div>

  <div class="huddle-row">
    <span>邀約試戴目標數</span>
    <span><span id="huddleTodayTrial">-</span> 位</span>
  </div>

  <div class="huddle-separator"></div>

  <div class="huddle-row">
    <span>今日外撥目標數</span>
    <span><span id="huddleTodayCallTotal">-</span> 通</span>
  </div>

  <div class="huddle-row">
    <span>邀約回店目標數</span>
    <span><span id="huddleTodayOld3Y">-</span> 位</span>
  </div>

  <div class="huddle-separator"></div>

  <h2>昨日執行檢視</h2>

  <div class="check-row">
    <span>試戴數</span>
    <span class="check-value" id="checkTrialText">-</span>
  </div>

  <div class="check-row">
    <span>外撥通數</span>
    <span class="check-value" id="checkCallText">-</span>
  </div>

  <div class="check-row">
    <span>邀約回店數</span>
    <span class="check-value" id="checkInviteText">-</span>
  </div>

  <div class="check-row">
    <span>邀約成功率</span>
    <span class="check-value">
      <span id="checkInviteRateText">-</span>
      <span id="checkInviteRateBadge" class="badge" style="display:none;"></span>
    </span>
  </div>
</section>

<!-- 每日回報（原樣保留） -->
<div id="report-view">
  <!-- ⚠️ 你原本的每日回報區塊完整保留，未再貼一次以避免重複 -->
</div>

</div>

<div class="actions">
  <button class="btn-primary" onclick="generateMessage()">⛄️ 產生訊息</button>
  <button class="btn-secondary" onclick="copyMessage()">☃️ 複製文字</button>
</div>

<script src="app.js?v=7"></script>
</body>
</html>
